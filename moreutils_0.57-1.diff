diff -Naur debian/changelog debian/changelog
--- debian/changelog	2015-12-23 00:31:25.286355659 +0400
+++ debian/changelog	2015-12-23 00:31:25.290355564 +0400
@@ -1,54 +1,36 @@
-moreutils (0.57-1) unstable; urgency=medium
+moreutils (0.57) unstable; urgency=medium
 
-  * New upstream version (0.57); no functional changes.
+  * Avoid using non-portable error() in ifdata, a portability reversion
+    introduced in 0.56.
 
- -- Nicolas Schier <nicolas@hjem.rpa.no>  Thu, 16 Jul 2015 22:22:53 +0200
+ -- Joey Hess <id@joeyh.name>  Mon, 13 Jul 2015 18:29:06 -0400
 
-moreutils (0.56-1) unstable; urgency=medium
+moreutils (0.56) unstable; urgency=medium
 
-  * New upstream version:
-    * ifdata: Fix error messages when a non-existent network interface
-      is queried. Closes: #386754
-    * errno.docbook: Fix typo. Closes: #749399
-    * vidir: Create missing target directories. Closes: #728688
-  * All patches applied upstream
-  * Upload to unstable
+  * ifdata: Fix error messages when a non-existent network interface
+    is queried. Closes: #386754 Thanks, Nicolas Schier
+  * errno.docbook: Fix typo. Closes: #749399
+  * vidir: Create missing target directories. Closes: #728688
+    Thanks, Nicolas Schier
 
- -- Nicolas Schier <nicolas@hjem.rpa.no>  Thu, 04 Jun 2015 04:37:11 +0200
+ -- Joey Hess <id@joeyh.name>  Wed, 03 Jun 2015 12:03:50 -0400
 
-moreutils (0.55-2) experimental; urgency=medium
+moreutils (0.55) unstable; urgency=medium
 
-  * errno.docbook: fix typo (Closes: #749399) (upstream patch)
-  * ifdata: descriptive non-exist netdev error msg (Closes: #386754)
-    (upstream patch)
-  * vidir: Create missing target directories (Closes: #728688)
+  * parallel: serialise output through internal pipe. Closes: #704125
+    Thanks, Nicolas Schier.
+  * sponge: add append option '-a'. Closes: #623197
+    Thanks, Nicolas Schier.
 
- -- Nicolas Schier <nicolas@hjem.rpa.no>  Fri, 17 Apr 2015 05:32:21 +0200
+ -- Joey Hess <id@joeyh.name>  Mon, 19 Jan 2015 13:58:08 -0400
 
-moreutils (0.55-1) experimental; urgency=medium
+moreutils (0.54) unstable; urgency=medium
 
-  * New upstream release:
-    * parallel: serialise output through internal pipe (Closes: #704125).
-    * sponge: add append option '-a' (Closes: #623197),
-      thanks, Michael Stummvoll.
-    * sponge: make '-a' atomically, if possible.
-    * copyright and URL updates.
-  * Add preliminary watch file (download does not work).
+  * vidir: Fix bug in handling filenames that share a common
+    prefix when renaming. Closes: #654326
+    Thanks, Kushal Kumaran
 
- -- Nicolas Schier <nicolas@hjem.rpa.no>  Wed, 28 Jan 2015 08:48:55 +0100
-
-moreutils (0.54-1) unstable; urgency=medium
-
-  * Set debhelper compat to 9.
-  * Remove unused lines from debian/rules.
-  * New maintainer (Closes: #768529).
-  * Update copyright.
-  * Set source format to '3.0 (quilt)'.
-  * Update Standards-Version to 3.9.6 (no changes required).
-  * New upstream version (0.54).
-    Includes a vidir bug fix (Closes: #654326).
-
- -- Nicolas Schier <nicolas@hjem.rpa.no>  Tue,  2 Dec 2014 04:58:04 +0100
+ -- Joey Hess <id@joeyh.name>  Fri, 28 Nov 2014 11:25:32 -0400
 
 moreutils (0.53) unstable; urgency=medium
 
diff -Naur debian/copyright debian/copyright
--- debian/copyright	2015-12-23 00:31:25.290355564 +0400
+++ debian/copyright	2015-12-23 00:31:25.290355564 +0400
@@ -50,6 +50,14 @@
 Copyright: 2000, 2001, 2003, 2005, 2006 Free Software Foundation, Inc.
 License: GPL-2+
 
+Files: envx.c
+Copyright: 2015 akmonk
+License: GPL-2+
+
+Files: lib-envx.c
+Copyright: 2015 akmonk
+License: GPL-2+
+
 License: GPL-2
  The full text of the GPL is distributed as COPYING in moreutils's source,
  and is distributed in /usr/share/common-licenses/GPL-2 on Debian systems.
diff -Naur envx.c envx.c
--- envx.c	1970-01-01 03:00:00.000000000 +0300
+++ envx.c	2015-12-23 00:31:25.294355116 +0400
@@ -0,0 +1,19 @@
+#include "stdio.h"
+int main(int argc, char *argv[])
+
+{
+  int i;
+  char *pid;
+  // переданы ли pid
+  if (argc < 2)
+  {
+    printf("Ошибка. Введите pwdx pid1 [pid2]\n");
+    return 1;
+  }
+  else
+  {
+    for (i=1;i<argc;i++)
+    envx(argv[i]);
+  }
+  return 0;
+} 
diff -Naur lib-envx.c lib-envx.c
--- lib-envx.c	1970-01-01 03:00:00.000000000 +0300
+++ lib-envx.c	2015-12-23 00:31:25.294355116 +0400
@@ -0,0 +1,34 @@
+#include "stdlib.h"
+#include "string.h"
+#include "stdio.h"
+#include "errno.h"
+
+#define MAX_ENV_SIZE 4096
+
+int envx (char * pid)
+{
+  int i,len;
+  char *path_buf = malloc(MAX_ENV_SIZE);
+  char *buf, *s;
+  ssize_t buf_len;
+  buf_len = 14 + strlen(pid) + 1;
+  buf = malloc(buf_len);
+  sprintf(buf,"/proc/%s/environ",pid);
+  FILE *f;
+  f = fopen(buf,"r");
+  if (f == NULL)
+  {
+    s = strerror(errno == ENOENT ? ESRCH : errno);
+    fprintf(stderr, "%s: %s\n", pid, s);
+    free(path_buf);
+    return 1;
+  }
+  while ((len = fread(path_buf, 1, MAX_ENV_SIZE-1, f)) > 0)
+  {
+    for (i = 0; i < len; i++)
+      if (path_buf[i] == 0) path_buf[i] = 10;
+    path_buf[len] = 0;
+    printf("%s", path_buf);
+  }
+  return 0;
+}
diff -Naur Makefile Makefile
--- Makefile	2015-12-23 00:31:25.286355659 +0400
+++ Makefile	2015-12-23 00:53:58.850296352 +0400
@@ -1,22 +1,34 @@
-BINS=isutf8 ifdata ifne pee sponge mispipe lckdo parallel errno
+BINS=isutf8 ifdata ifne pee sponge mispipe lckdo parallel errno envx
 PERLSCRIPTS=vidir vipe ts combine zrun chronic
 MANS=sponge.1 vidir.1 vipe.1 isutf8.1 ts.1 combine.1 ifdata.1 ifne.1 pee.1 zrun.1 chronic.1 mispipe.1 lckdo.1 parallel.1 errno.1
 CFLAGS?=-O2 -g -Wall
 INSTALL_BIN?=install -s
 PREFIX?=/usr
+LIBDIR=/usr/local/lib
 
 DOCBOOK2XMAN=xsltproc --param man.authors.section.enabled 0 /usr/share/xml/docbook/stylesheet/docbook-xsl/manpages/docbook.xsl
 
-all: $(BINS) $(MANS)
+all: lib-envx.so envx $(BINS) $(MANS)
+
+lib-envx.o:
+	gcc -fPIC -c -o lib-envx.o lib-envx.c
+
+lib-envx.so: lib-envx.o
+	gcc -shared -o lib-envx.so -Wall lib-envx.o
+
+envx: envx.o lib-envx.so
+	gcc -Wall -o envx envx.o lib-envx.so
 
 clean:
-	rm -f $(BINS) $(MANS) dump.c errnos.h errno.o
+	rm -f $(BINS) $(MANS) dump.c errnos.h errno.o *.o *.so
 
 install:
 	mkdir -p $(DESTDIR)$(PREFIX)/bin
 	$(INSTALL_BIN) $(BINS) $(DESTDIR)$(PREFIX)/bin
 	install $(PERLSCRIPTS) $(DESTDIR)$(PREFIX)/bin
-	
+	install lib-envx.so $(LIBDIR)/lib-envx.so
+	ldconfig
+		
 	mkdir -p $(DESTDIR)$(PREFIX)/share/man/man1
 	install $(MANS) $(DESTDIR)$(PREFIX)/share/man/man1
 
